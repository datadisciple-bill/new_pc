services:
  equinix-pricing-tool:
    build: .
    container_name: equinix-pricing-tool
    restart: unless-stopped
    ports:
      - "8088:80"
    environment:
      - TZ=America/New_York
    networks:
      - cloudflared
    # Unraid labels for Community Applications (optional)
    labels:
      net.unraid.docker.managed: "dockerman"
      net.unraid.docker.webui: "http://[IP]:[PORT:8088]"
      net.unraid.docker.icon: "https://www.equinix.com/favicon.ico"

  cloudflared:
    image: cloudflare/cloudflared
    container_name: cloudflared
    environment:
      - TUNNEL_TOKEN=${TUNNEL_TOKEN}
    command: tunnel --no-autoupdate run
    restart: unless-stopped
    depends_on:
      - equinix-pricing-tool
    networks:
      - cloudflared

networks:
  cloudflared:
    name: cloudflared
